<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 12 - Spring Boot et Projets - Formation Java Complète</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --java-orange: #f89820;
            --java-blue: #5382a1;
            --success-color: #059669;
            --warning-color: #d97706;
            --info-color: #0284c7;
            --dark-color: #1f2937;
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --text-muted: #64748b;
            --question-bg: #f1f5f9;
            --answer-bg: #dcfce7;
            --explanation-bg: #fef3c7;
            --code-bg: #0f172a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-color);
            line-height: 1.6;
        }

        .navbar {
            background: linear-gradient(135deg, var(--java-orange), var(--java-blue));
            backdrop-filter: blur(10px);
        }

        .sidebar {
            position: sticky;
            top: 100px;
            height: calc(100vh - 120px);
            overflow-y: auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
        }

        .main-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .content-header {
            background: linear-gradient(135deg, var(--java-orange), var(--java-blue));
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .section-title {
            color: var(--java-orange);
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-block {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .exercise-card {
            background: var(--question-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--java-orange);
        }

        .solution-card {
            background: var(--answer-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            border-left: 4px solid var(--success-color);
        }

        .concept-highlight {
            background: linear-gradient(135deg, rgba(248, 152, 32, 0.1), rgba(83, 130, 161, 0.1));
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--java-orange);
        }

        .progress-bar {
            background: linear-gradient(135deg, var(--java-orange), var(--java-blue));
            height: 100%;
            width: 100%; /* 12/12 modules */
            border-radius: 2px;
        }

        .project-showcase {
            background: white;
            border: 2px solid var(--success-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../">
                <i class="fas fa-graduation-cap me-2"></i>
                InSkillBoost - Java
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../">Retour Hub</a>
                <a class="nav-link" href="./">Modules Java</a>
            </div>
        </div>
    </nav>

    <div class="container-fluid" style="margin-top: 80px;">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div style="color: var(--java-orange); font-weight: 600; margin-bottom: 1rem;">
                        <i class="fas fa-leaf me-2"></i>
                        Module 12 - Spring Boot et Projets
                    </div>
                    
                    <div style="background: var(--border-color); height: 4px; border-radius: 2px; margin: 1rem 0;">
                        <div class="progress-bar"></div>
                    </div>
                    <small class="text-muted d-block mb-3">Module 12 sur 12 - FINAL</small>
                    
                    <a href="#introduction-spring" style="display: block; padding: 0.5rem 0; color: var(--java-orange); text-decoration: none;">Introduction Spring</a>
                    <a href="#premier-projet" style="display: block; padding: 0.5rem 0; color: var(--text-muted); text-decoration: none;">Premier Projet</a>
                    <a href="#api-rest" style="display: block; padding: 0.5rem 0; color: var(--text-muted); text-decoration: none;">API REST</a>
                    <a href="#jpa-hibernate" style="display: block; padding: 0.5rem 0; color: var(--text-muted); text-decoration: none;">JPA/Hibernate</a>
                    <a href="#projet-final" style="display: block; padding: 0.5rem 0; color: var(--text-muted); text-decoration: none;">Projet Final</a>
                    <a href="#exercices" style="display: block; padding: 0.5rem 0; color: var(--text-muted); text-decoration: none;">Projets (5)</a>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9">
                <div class="main-content">
                    <div class="content-header">
                        <h1>Module 12 - Spring Boot et Projets Finaux</h1>
                        <p class="lead mb-0">Créez des applications web modernes et professionnelles</p>
                    </div>

                    <div style="padding: 2rem;">
                        <!-- Introduction Spring -->
                        <section id="introduction-spring" style="margin-bottom: 3rem;">
                            <h2 class="section-title">
                                <i class="fas fa-leaf"></i>
                                Introduction à Spring Boot
                            </h2>
                            
                            <p>Spring Boot est un framework qui simplifie le développement d'applications Java en fournissant une configuration automatique et des conventions sensées.</p>

                            <div class="concept-highlight">
                                <h5>Avantages de Spring Boot :</h5>
                                <ul>
                                    <li><strong>Configuration automatique :</strong> Moins de XML et d'annotations</li>
                                    <li><strong>Serveur embarqué :</strong> Tomcat intégré, déploiement facile</li>
                                    <li><strong>Starter dependencies :</strong> Gestion simplifiée des dépendances</li>
                                    <li><strong>Production-ready :</strong> Métriques, monitoring, health checks</li>
                                    <li><strong>Écosystème riche :</strong> Spring Data, Security, Cloud</li>
                                </ul>
                            </div>

                            <h4>Structure d'un Projet Spring Boot</h4>
                            <div class="code-block">
<pre><code class="language-text">mon-projet-spring/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/inskillflow/monprojet/
│   │   │       ├── MonProjetApplication.java (classe principale)
│   │   │       ├── controller/
│   │   │       │   └── ProductController.java
│   │   │       ├── model/
│   │   │       │   └── Product.java
│   │   │       ├── repository/
│   │   │       │   └── ProductRepository.java
│   │   │       └── service/
│   │   │           └── ProductService.java
│   │   └── resources/
│   │       ├── application.properties
│   │       ├── static/ (CSS, JS, images)
│   │       └── templates/ (Thymeleaf)
│   └── test/
│       └── java/
└── pom.xml (Maven) ou build.gradle (Gradle)</code></pre>
                            </div>
                        </section>

                        <!-- Projet Final -->
                        <section id="projet-final" style="margin-bottom: 3rem;">
                            <h2 class="section-title">
                                <i class="fas fa-trophy"></i>
                                Projet Final : API de Gestion de Bibliothèque
                            </h2>
                            
                            <div class="project-showcase">
                                <h3 style="color: var(--success-color); margin-bottom: 1.5rem;">
                                    <i class="fas fa-book me-2"></i>
                                    Système de Gestion de Bibliothèque Complète
                                </h3>
                                
                                <p><strong>Description :</strong> Application web complète avec API REST pour gérer une bibliothèque moderne.</p>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>Fonctionnalités Backend :</h5>
                                        <ul>
                                            <li>API REST complète (CRUD)</li>
                                            <li>Base de données avec JPA/Hibernate</li>
                                            <li>Authentification JWT</li>
                                            <li>Validation des données</li>
                                            <li>Gestion des exceptions globale</li>
                                            <li>Tests unitaires et intégration</li>
                                            <li>Documentation Swagger</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Entités Métier :</h5>
                                        <ul>
                                            <li><strong>Livre :</strong> ISBN, titre, auteur, genre</li>
                                            <li><strong>Auteur :</strong> Biographie, nationalité</li>
                                            <li><strong>Membre :</strong> Profil, historique emprunts</li>
                                            <li><strong>Emprunt :</strong> Dates, statut, amendes</li>
                                            <li><strong>Réservation :</strong> File d'attente</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="code-block">
<pre><code class="language-java">// Entité Livre avec JPA
@Entity
@Table(name = "livres")
public class Livre {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(unique = true, nullable = false)
    private String isbn;
    
    @Column(nullable = false)
    private String titre;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "auteur_id")
    private Auteur auteur;
    
    @Enumerated(EnumType.STRING)
    private Genre genre;
    
    @Column(name = "date_publication")
    private LocalDate datePublication;
    
    private boolean disponible = true;
    
    @OneToMany(mappedBy = "livre", cascade = CascadeType.ALL)
    private List&lt;Emprunt&gt; emprunts = new ArrayList&lt;&gt;();
    
    // Constructeurs
    public Livre() {}
    
    public Livre(String isbn, String titre, Auteur auteur, Genre genre, LocalDate datePublication) {
        this.isbn = isbn;
        this.titre = titre;
        this.auteur = auteur;
        this.genre = genre;
        this.datePublication = datePublication;
    }
    
    // Méthodes métier
    public boolean peutEtreEmprunte() {
        return disponible && !aDesEmpruntsEnCours();
    }
    
    private boolean aDesEmpruntsEnCours() {
        return emprunts.stream()
            .anyMatch(emprunt -&gt; emprunt.getStatut() == StatutEmprunt.EN_COURS);
    }
    
    public int getNombreEmpruntsTotal() {
        return emprunts.size();
    }
    
    // Getters et Setters (omis pour la brièveté)
}

// Contrôleur REST
@RestController
@RequestMapping("/api/livres")
@CrossOrigin(origins = "*")
public class LivreController {
    
    @Autowired
    private LivreService livreService;
    
    @GetMapping
    public ResponseEntity&lt;Page&lt;LivreDTO&gt;&gt; getAllLivres(
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "10") int size,
            @RequestParam(required = false) String search) {
        
        Pageable pageable = PageRequest.of(page, size);
        Page&lt;LivreDTO&gt; livres;
        
        if (search != null && !search.trim().isEmpty()) {
            livres = livreService.rechercherLivres(search, pageable);
        } else {
            livres = livreService.getAllLivres(pageable);
        }
        
        return ResponseEntity.ok(livres);
    }
    
    @GetMapping("/{id}")
    public ResponseEntity&lt;LivreDTO&gt; getLivreById(@PathVariable Long id) {
        try {
            LivreDTO livre = livreService.getLivreById(id);
            return ResponseEntity.ok(livre);
        } catch (LivreNotFoundException e) {
            return ResponseEntity.notFound().build();
        }
    }
    
    @PostMapping
    public ResponseEntity&lt;LivreDTO&gt; creerLivre(@Valid @RequestBody CreateLivreRequest request) {
        try {
            LivreDTO nouveauLivre = livreService.creerLivre(request);
            return ResponseEntity.status(HttpStatus.CREATED).body(nouveauLivre);
        } catch (AuteurNotFoundException e) {
            return ResponseEntity.badRequest().build();
        }
    }
    
    @PutMapping("/{id}")
    public ResponseEntity&lt;LivreDTO&gt; modifierLivre(
            @PathVariable Long id, 
            @Valid @RequestBody UpdateLivreRequest request) {
        try {
            LivreDTO livreModifie = livreService.modifierLivre(id, request);
            return ResponseEntity.ok(livreModifie);
        } catch (LivreNotFoundException e) {
            return ResponseEntity.notFound().build();
        }
    }
    
    @DeleteMapping("/{id}")
    public ResponseEntity&lt;Void&gt; supprimerLivre(@PathVariable Long id) {
        try {
            livreService.supprimerLivre(id);
            return ResponseEntity.noContent().build();
        } catch (LivreNotFoundException e) {
            return ResponseEntity.notFound().build();
        } catch (LivreEnCoursEmpruntException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT).build();
        }
    }
    
    @PostMapping("/{id}/emprunter")
    public ResponseEntity&lt;EmpruntDTO&gt; emprunterLivre(
            @PathVariable Long id,
            @RequestBody EmpruntRequest request) {
        try {
            EmpruntDTO emprunt = livreService.emprunterLivre(id, request.getMembreId());
            return ResponseEntity.ok(emprunt);
        } catch (LivreNotFoundException | MembreNotFoundException e) {
            return ResponseEntity.notFound().build();
        } catch (LivreIndisponibleException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT).build();
        }
    }
}

// Service métier
@Service
@Transactional
public class LivreService {
    
    @Autowired
    private LivreRepository livreRepository;
    
    @Autowired
    private AuteurRepository auteurRepository;
    
    @Autowired
    private EmpruntRepository empruntRepository;
    
    public Page&lt;LivreDTO&gt; getAllLivres(Pageable pageable) {
        Page&lt;Livre&gt; livres = livreRepository.findAll(pageable);
        return livres.map(this::convertirEnDTO);
    }
    
    public Page&lt;LivreDTO&gt; rechercherLivres(String search, Pageable pageable) {
        Page&lt;Livre&gt; livres = livreRepository.findByTitreContainingIgnoreCaseOrAuteurNomContainingIgnoreCase(
            search, search, pageable);
        return livres.map(this::convertirEnDTO);
    }
    
    public LivreDTO getLivreById(Long id) throws LivreNotFoundException {
        Livre livre = livreRepository.findById(id)
            .orElseThrow(() -&gt; new LivreNotFoundException("Livre non trouvé avec l'ID: " + id));
        return convertirEnDTO(livre);
    }
    
    public LivreDTO creerLivre(CreateLivreRequest request) throws AuteurNotFoundException {
        Auteur auteur = auteurRepository.findById(request.getAuteurId())
            .orElseThrow(() -&gt; new AuteurNotFoundException("Auteur non trouvé"));
        
        // Vérifier l'unicité de l'ISBN
        if (livreRepository.existsByIsbn(request.getIsbn())) {
            throw new ISBNDejaExistantException("Un livre avec cet ISBN existe déjà");
        }
        
        Livre livre = new Livre(
            request.getIsbn(),
            request.getTitre(),
            auteur,
            request.getGenre(),
            request.getDatePublication()
        );
        
        Livre livreEnregistre = livreRepository.save(livre);
        return convertirEnDTO(livreEnregistre);
    }
    
    public EmpruntDTO emprunterLivre(Long livreId, Long membreId) 
            throws LivreNotFoundException, MembreNotFoundException, LivreIndisponibleException {
        
        Livre livre = livreRepository.findById(livreId)
            .orElseThrow(() -&gt; new LivreNotFoundException("Livre non trouvé"));
        
        Membre membre = membreRepository.findById(membreId)
            .orElseThrow(() -&gt; new MembreNotFoundException("Membre non trouvé"));
        
        if (!livre.peutEtreEmprunte()) {
            throw new LivreIndisponibleException("Livre non disponible pour emprunt");
        }
        
        // Vérifier les limites d'emprunt du membre
        long empruntsEnCours = empruntRepository.countByMembreAndStatut(membre, StatutEmprunt.EN_COURS);
        if (empruntsEnCours &gt;= membre.getLimiteEmprunts()) {
            throw new LimiteEmpruntDepasseeException("Limite d'emprunts atteinte");
        }
        
        // Créer l'emprunt
        Emprunt emprunt = new Emprunt(livre, membre, LocalDate.now(), LocalDate.now().plusWeeks(3));
        livre.setDisponible(false);
        
        Emprunt empruntEnregistre = empruntRepository.save(emprunt);
        livreRepository.save(livre);
        
        return convertirEmpruntEnDTO(empruntEnregistre);
    }
    
    private LivreDTO convertirEnDTO(Livre livre) {
        return new LivreDTO(
            livre.getId(),
            livre.getIsbn(),
            livre.getTitre(),
            livre.getAuteur().getNom(),
            livre.getGenre().toString(),
            livre.getDatePublication(),
            livre.isDisponible(),
            livre.getNombreEmpruntsTotal()
        );
    }
}</code></pre>
                            </div>
                        </section>

                        <!-- Exercices/Projets -->
                        <section id="exercices" style="margin-bottom: 3rem;">
                            <h2 class="section-title">
                                <i class="fas fa-rocket"></i>
                                Projets Finaux Spring Boot (5 projets)
                            </h2>

                            <!-- Projet 1 -->
                            <div class="exercise-card">
                                <h4 style="color: var(--java-orange); margin-bottom: 1rem;">
                                    <i class="fas fa-shopping-cart"></i> Projet 1 : API E-commerce Complète
                                </h4>
                                <p><strong>Objectif :</strong> Créer une API REST complète pour un site e-commerce.</p>
                                <p><strong>Fonctionnalités :</strong></p>
                                <ul>
                                    <li>Gestion produits avec catégories et stock</li>
                                    <li>Système de commandes et panier</li>
                                    <li>Authentification JWT et rôles utilisateur</li>
                                    <li>Système de paiement simulé</li>
                                    <li>Historique des commandes et facturation</li>
                                    <li>API de recommandations basiques</li>
                                </ul>
                                
                                <div class="concept-highlight">
                                    <h5>Technologies Utilisées :</h5>
                                    <ul class="mb-0">
                                        <li><strong>Spring Boot 3.2</strong> - Framework principal</li>
                                        <li><strong>Spring Data JPA</strong> - Persistance données</li>
                                        <li><strong>Spring Security</strong> - Authentification/autorisation</li>
                                        <li><strong>MySQL/PostgreSQL</strong> - Base de données</li>
                                        <li><strong>Swagger/OpenAPI</strong> - Documentation API</li>
                                        <li><strong>JUnit 5</strong> - Tests unitaires</li>
                                    </ul>
                                </div>
                                
                                <button class="btn btn-success" type="button" data-bs-toggle="collapse" data-bs-target="#projet1">
                                    Voir l'architecture complète
                                </button>
                                
                                <div class="collapse mt-3" id="projet1">
                                    <div class="solution-card">
                                        <h6>Architecture du Projet E-commerce :</h6>
                                        <div class="code-block">
<pre><code class="language-java">// Entité Produit
@Entity
@Table(name = "produits")
public class Produit {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false)
    private String nom;
    
    @Column(length = 1000)
    private String description;
    
    @Column(nullable = false)
    private BigDecimal prix;
    
    @Column(nullable = false)
    private Integer stock;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "categorie_id")
    private Categorie categorie;
    
    @OneToMany(mappedBy = "produit", cascade = CascadeType.ALL)
    private List&lt;LigneCommande&gt; lignesCommande = new ArrayList&lt;&gt;();
    
    @CreationTimestamp
    private LocalDateTime dateCreation;
    
    @UpdateTimestamp
    private LocalDateTime dateModification;
    
    // Méthodes métier
    public boolean estDisponible(int quantiteDemandee) {
        return stock &gt;= quantiteDemandee;
    }
    
    public void diminuerStock(int quantite) throws StockInsuffisantException {
        if (quantite &gt; stock) {
            throw new StockInsuffisantException("Stock insuffisant pour " + nom);
        }
        this.stock -= quantite;
    }
    
    public void augmenterStock(int quantite) {
        this.stock += quantite;
    }
}

// Contrôleur E-commerce
@RestController
@RequestMapping("/api/produits")
@Validated
public class ProduitController {
    
    @Autowired
    private ProduitService produitService;
    
    @GetMapping
    public ResponseEntity&lt;Page&lt;ProduitDTO&gt;&gt; getAllProduits(
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "12") int size,
            @RequestParam(required = false) String search,
            @RequestParam(required = false) Long categorieId,
            @RequestParam(defaultValue = "nom") String sortBy,
            @RequestParam(defaultValue = "asc") String sortDir) {
        
        Sort sort = sortDir.equalsIgnoreCase("desc") ? 
            Sort.by(sortBy).descending() : 
            Sort.by(sortBy).ascending();
        
        Pageable pageable = PageRequest.of(page, size, sort);
        
        Page&lt;ProduitDTO&gt; produits = produitService.rechercherProduits(
            search, categorieId, pageable);
        
        return ResponseEntity.ok(produits);
    }
    
    @PostMapping
    @PreAuthorize("hasRole('ADMIN')")
    public ResponseEntity&lt;ProduitDTO&gt; creerProduit(@Valid @RequestBody CreateProduitRequest request) {
        ProduitDTO produit = produitService.creerProduit(request);
        return ResponseEntity.status(HttpStatus.CREATED).body(produit);
    }
    
    @PostMapping("/{id}/commander")
    @PreAuthorize("hasRole('USER')")
    public ResponseEntity&lt;CommandeDTO&gt; commanderProduit(
            @PathVariable Long id,
            @RequestBody @Valid CommandeRequest request,
            Authentication authentication) {
        
        String emailUtilisateur = authentication.getName();
        CommandeDTO commande = produitService.commanderProduit(id, request.getQuantite(), emailUtilisateur);
        
        return ResponseEntity.ok(commande);
    }
}

// Service métier avec logique complexe
@Service
@Transactional
public class ProduitService {
    
    @Autowired
    private ProduitRepository produitRepository;
    
    @Autowired
    private CommandeRepository commandeRepository;
    
    @Autowired
    private EmailService emailService;
    
    public CommandeDTO commanderProduit(Long produitId, int quantite, String emailUtilisateur) 
            throws ProduitNotFoundException, StockInsuffisantException {
        
        Produit produit = produitRepository.findById(produitId)
            .orElseThrow(() -&gt; new ProduitNotFoundException("Produit non trouvé"));
        
        // Vérifier le stock
        if (!produit.estDisponible(quantite)) {
            throw new StockInsuffisantException(
                "Stock insuffisant. Disponible: " + produit.getStock() + ", Demandé: " + quantite);
        }
        
        // Calculer le prix total
        BigDecimal prixTotal = produit.getPrix().multiply(BigDecimal.valueOf(quantite));
        
        // Créer la commande
        Commande commande = new Commande();
        commande.setEmailClient(emailUtilisateur);
        commande.setStatut(StatutCommande.EN_ATTENTE);
        commande.setDateCommande(LocalDateTime.now());
        
        // Créer la ligne de commande
        LigneCommande ligne = new LigneCommande();
        ligne.setProduit(produit);
        ligne.setQuantite(quantite);
        ligne.setPrixUnitaire(produit.getPrix());
        ligne.setCommande(commande);
        
        commande.getLignesCommande().add(ligne);
        commande.calculerTotal();
        
        // Diminuer le stock
        produit.diminuerStock(quantite);
        
        // Sauvegarder
        Commande commandeEnregistree = commandeRepository.save(commande);
        produitRepository.save(produit);
        
        // Envoyer email de confirmation
        emailService.envoyerConfirmationCommande(commandeEnregistree);
        
        return convertirCommandeEnDTO(commandeEnregistree);
    }
    
    // Méthode de recommandation basique
    public List&lt;ProduitDTO&gt; obtenirRecommandations(Long produitId, int limite) {
        Produit produit = produitRepository.findById(produitId).orElse(null);
        if (produit == null) return new ArrayList&lt;&gt;();
        
        // Recommander des produits de la même catégorie
        List&lt;Produit&gt; recommandations = produitRepository
            .findByCategorieAndIdNotOrderByNombreCommandesDesc(
                produit.getCategorie(), produitId, PageRequest.of(0, limite));
        
        return recommandations.stream()
            .map(this::convertirEnDTO)
            .collect(Collectors.toList());
    }
}</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Félicitations -->
                        <section style="margin-bottom: 3rem;">
                            <div class="project-showcase text-center">
                                <h2 style="color: var(--success-color); margin-bottom: 2rem;">
                                    <i class="fas fa-trophy me-3"></i>
                                    Félicitations ! Formation Java Complétée
                                </h2>
                                
                                <p class="lead mb-4">
                                    Vous avez terminé les <strong>12 modules</strong> de la formation Java la plus complète disponible gratuitement !
                                </p>
                                
                                <div class="row">
                                    <div class="col-md-3 mb-3">
                                        <div style="background: rgba(248, 152, 32, 0.1); padding: 1.5rem; border-radius: 8px;">
                                            <h4 style="color: var(--java-orange);">200+</h4>
                                            <small>Exercices Réalisés</small>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <div style="background: rgba(83, 130, 161, 0.1); padding: 1.5rem; border-radius: 8px;">
                                            <h4 style="color: var(--java-blue);">15</h4>
                                            <small>Projets Complétés</small>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <div style="background: rgba(5, 150, 105, 0.1); padding: 1.5rem; border-radius: 8px;">
                                            <h4 style="color: var(--success-color);">60h</h4>
                                            <small>Formation Intensive</small>
                                        </div>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <div style="background: rgba(245, 158, 11, 0.1); padding: 1.5rem; border-radius: 8px;">
                                            <h4 style="color: var(--warning-color);">Expert</h4>
                                            <small>Niveau Atteint</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <h5>Prêt pour le Niveau Supérieur ?</h5>
                                    <p>Cette formation gratuite vous a donné de solides bases. Découvrez nos formations premium avec :</p>
                                    <ul class="text-start" style="max-width: 600px; margin: 0 auto;">
                                        <li>Projets d'entreprise complexes</li>
                                        <li>Architecture microservices</li>
                                        <li>Déploiement Cloud (AWS, Azure)</li>
                                        <li>Mentorat personnalisé</li>
                                        <li>Certification officielle</li>
                                    </ul>
                                    
                                    <div class="mt-4">
                                        <a href="https://www.inskillflow.com/?utm_source=inskillboost&utm_medium=java-completion&utm_campaign=course-premium" 
                                           class="btn btn-warning btn-lg" target="_blank">
                                            <i class="fas fa-crown me-2"></i>Découvrir les Formations Premium
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Navigation -->
                        <div style="display: flex; justify-content: space-between; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                            <a href="module-11-entrees-sorties-fichiers.html" style="background: linear-gradient(135deg, var(--java-orange), var(--java-blue)); color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none;">
                                <i class="fas fa-arrow-left me-2"></i>Module 11 : I/O Fichiers
                            </a>
                            <a href="../" style="background: linear-gradient(135deg, var(--success-color), var(--info-color)); color: white; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none;">
                                <i class="fas fa-home me-2"></i>Retour Hub InSkillBoost
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    
    <script>
        hljs.highlightAll();
        
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>
